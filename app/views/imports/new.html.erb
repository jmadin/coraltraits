<%# @item_import ||= item_import if item_import%>
<%= render partial: "sidebar" %>
<div class="col-md-9">
	<h1><span class="glyphicon glyphicon-cloud-upload" style="color:#428bca;"></span>  Upload <%= @model_name %> </h1>

	<p>A CSV or Excel file can be used to import records. The first row should be the column name. The following columns are allowed.</p>
	
	<% if @model_name.to_s != "Observation" %>
		<p>If an <strong>id</strong> is supplied it will update the matching record instead of creating a new one.</p>
	<% end %>
	
	<% if @item_import.errors.any? %>
		    <div id="error_explanation">
		      <h3><%= pluralize(@item_import.errors.count, "error") %> prohibited this import from completing:</h3>
		      <ul>
		      <% @item_import.errors.full_messages.each do |msg| %>
		        <li><%= msg %></li>
		      <% end %>
		      </ul>
		    </div>
		  <% end %>

	<div class="upload_form col-md-6">
		<%= form_for @item_import, :url => upload_path, html:{class: "form-horizontal"}  do |f| %>
		  <%= f.hidden_field :model_name, :value => @model_name %>
		  <div class="col-md-9"><%= f.file_field :file %> </div>
		  <div class="col-md-3"><%= f.submit "Upload", :class => 'btn btn-primary'%></div>
		  
		<% end %>
	</div> <!-- upload form -->
	
	<div class="clearfix"></div>
	<% if @model_name.to_s == "Observation" %>
		<br/>
		<br/>
		<h4>Important Notes:</h4>
		<p>
			Each row in the CSV represents a measurement. One Observation is created corresponding to an observation_id. <br/><br/>
			
			<code>Two rows with <b>same observation_id </b>represents <b>One Observation with Two Measurements.</b></code>
			<br/><br/>
			</p>
			<%= image_tag("observation_example.png", :class => "img-responsive") %> <br/><br/>

			<h4>Mandatory CSV Headers</h4>
				<code>observation_id, access, user_id, coral_id, location_id, resource_id, trait_id, standard_id, methodology_id, value, value_type, precision, precision_type, precision_upper, replicates, notes </code>
			</ul>
		
	<% end %>
</div>