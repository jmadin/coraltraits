<%# @item_import ||= item_import if item_import%>
<%= render partial: "sidebar" %>
<div class="col-md-9">
	<h1>Upload <%= @model_name %> </h1>

	<p>A CSV or Excel file can be used to import records. The first row should be the column name. The following columns are allowed.</p>
	
	<% if @model_name.to_s != "Observation" %>
		<p>If an <strong>id</strong> is supplied it will update the matching record instead of creating a new one.</p>
	<% end %>

	<%= form_for @item_import, :url => upload_path do |f| %>
	  <% if @item_import.errors.any? %>
	    <div id="error_explanation">
	      <h2><%= pluralize(@item_import.errors.count, "error") %> prohibited this import from completing:</h2>
	      <ul>
	      <% @item_import.errors.full_messages.each do |msg| %>
	        <li><%= msg %></li>
	      <% end %>
	      </ul>
	    </div>
	  <% end %>

		

	  <div class="field">
	    <%= f.file_field :file %>
	  </div>

	  <%= f.hidden_field :model_name, :value => @model_name %>
	  <br/>

	  <div class="buttons"><%= f.submit "Upload" %></div>
	<% end %>

	<% if @model_name.to_s == "Observation" %>
		<br/>
		<br/>
		<h4>Important Notes:</h4>
		<p>
			Each row in the CSV represents a measurement. One Observation is created corresponding to an observation_id. <br/>
			</p>
			<div class="alert alert-danger">Two rows with <b>same observation_id </b>represents <b>One Observation with Two Measurements.</b></div>
			<%= image_tag("observation_example.png", :class => "img-responsive") %> <br/><br/>

			<h4>CSV Headers</h4>
			<ul>
				
				<li>observation_id </li>
				<li>access</li>
				<li>user_id</li>
				<li>coral_id</li>
				<li>location_id</li>
				<li>resource_id</li>
				<li>trait_id</li>
				<li>standard_id</li>
				<li>methodology_id</li>
				<li>value</li>
				<li>value_type</li>
				<li>precision</li>
				<li>precision_type</li>
				<li>precision_upper</li>
				<li>replicates</li>
			</ul>
		
	<% end %>
</div>