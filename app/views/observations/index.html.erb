<% provide(:title, 'Methodologies') %>


<div class="page-header">
  <h1>Observations</h1>
</div>

<div class="well">
	<div class="row">
	  <div class="col-md-6">
			<%= form_tag observations_path, :method => 'get' do %>
		    <div class="input-group">
		      <%= text_field_tag :search, params[:search], :placeholder => "Search measurement values...", class: "form-control" %>
		      <span class="input-group-btn">
				    <%= submit_tag "Search", :name => nil, class: "btn btn-default" %>
						<%= link_to "See All", observations_path(search: params[:search], all: true), class: "btn btn-warning" %>
						<%= link_to 'Reset', observations_path, class: "btn btn-default" %>
		      </span>
		    </div><br>
			<% end %>
			<p>Download observation list as a <%= link_to "csv", observations_path(format: "csv", page: (params[:page] || 1), search: params[:search], all: params[:all]) %>.</p>
	  </div>
	  <div class="col-md-6">
	  	<% if signed_in? && current_user.contributor? %>	
				<%= link_to 'New Observation', new_observation_path, class: "btn btn-primary btn-md pull-right" %>
			<% end %>
	  </div>
	</div>
</div>

<% if @observations.empty? %>
	<p class="alert alert-default">No observations available</p>
<% else %>

	<%= will_paginate @observations %>
	<%= render "shared/observations" %>
	<br>
	<%= will_paginate @observations %>

<% end %>
