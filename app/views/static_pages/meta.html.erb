<% provide(:title, 'Meta') %>

<div class="row">
  <div class="col-md-8 col-md-offset-2">

		<h3>Metadata</h3>


		<table class="table table-condensed">
			<tr>
			  <th>Release Status</th>
			  <th>Class</th>
			  <th>Trait Name</th>
			  <th>Editor</th>
			  <th>Measurements</th>
			  <th>Units</th>
			  <th></th>
			</tr>
			<% @traits.sort_by{ |h| [h[:release_status] || "z", h[:trait_class] || "z", h[:trait_name]] }.each do |trait| %>
				<tr>
					<% if trait.release_status.blank? %>
			  		<td style="background-color: red;">
					<% else %>
			  		<td>
					<% end %>
				  	<%= trait.release_status %>
				  </td>
				  <td><%= trait.trait_class %></td>
				  <td><%= trait.trait_name %></td>
				  <td><%= trait.user.name %></td>
				  <td><%= Measurement.where(:trait_id => trait.id).size %></td>
				  <td><% sta = Measurement.where(:trait_id => trait.id) %>
						<% if !sta.blank? %>
							<%= sta.map(&:standard_id).uniq %>
						<% end %>
				  </td>
				  <td><%= link_to 'Edit', edit_trait_path(trait) %></td>
				</tr>
			<% end %>
		</table>
		
	</div>
</div>